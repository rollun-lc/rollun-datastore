# rollun-datastore - –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–π –∞–Ω–∞–ª–∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `rollun-datastore` - PHP –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ RQL (Resource Query Language).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üìã [README.md](README.md)
- –û–±—â–∏–π –æ–±–∑–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### üèóÔ∏è [architecture.md](architecture.md)
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ –∏ –∏–µ—Ä–∞—Ä—Ö–∏—è –∫–ª–∞—Å—Å–æ–≤
- –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- RQL —Å–∏—Å—Ç–µ–º–∞ –∏ middleware –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã SOLID

### üìö [api_reference.md](api_reference.md)
- –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö API
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã DataStore, Repository, Uploader
- RQL –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ middleware
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### ‚öôÔ∏è [configuration.md](configuration.md)
- –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- DataStore –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (Memory, DbTable, HttpClient, CSV)
- Repository –∏ Uploader –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- Database –∏ middleware –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üí° [examples.md](examples.md)
- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å DataStore
- RQL –∑–∞–ø—Ä–æ—Å—ã –∏ HTTP API
- Repository –ø–∞—Ç—Ç–µ—Ä–Ω –∏ Uploader
- –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### üîß [TROUBLESHOOTING.md](TROUBLESHOOTING.md)
- –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –û—Ç–ª–∞–¥–∫–∞ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### üîç [detailed_class_analysis.md](detailed_class_analysis.md)
- –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- –ü–æ–ª–Ω—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –∏ —Å–≤–æ–π—Å—Ç–≤
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –°–≤—è–∑–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### DataStore
- **Memory** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏
- **DbTable** - —Ä–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –ë–î
- **HttpClient** - –≤–Ω–µ—à–Ω–∏–µ HTTP API
- **CsvBase/CsvIntId** - CSV —Ñ–∞–π–ª—ã
- **SerializedDbTable** - —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **Cacheable** - –∫—ç—à–∏—Ä—É–µ–º—ã–µ DataStore

### RQL (Resource Query Language)
- –ü–∞—Ä—Å–∏–Ω–≥ –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –ª–∏–º–∏—Ç–æ–≤
- –ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
- Type casting –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### Middleware
- **DataStoreApi** - –æ—Å–Ω–æ–≤–Ω–æ–π HTTP API
- **DataStoreRest** - REST –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- **RequestDecoder** - –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- **ResourceResolver** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### Repository
- **ModelRepository** - —Ä–∞–±–æ—Ç–∞ —Å –º–æ–¥–µ–ª—è–º–∏
- **ModelAbstract** - –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å
- Field mapping –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### Uploader
- **Uploader** - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **DataStorePack** - –ø–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API
–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ RQL –ø–æ–¥–¥–µ—Ä–∂–∫–∞
–ú–æ—â–Ω—ã–π —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

### ‚úÖ Middleware –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚úÖ Repository –ø–∞—Ç—Ç–µ—Ä–Ω
–£–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–æ–¥–µ–ª—è–º–∏ –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Laminas ServiceManager

### ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
PSR-3 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
composer require rollun-com/rollun-datastore
```

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```php
use rollun\datastore\DataStore\Memory;

// –°–æ–∑–¥–∞–Ω–∏–µ DataStore
$dataStore = new Memory(['id', 'name', 'email']);

// –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
$record = $dataStore->create([
    'id' => 1,
    'name' => 'John Doe',
    'email' => 'john@example.com'
]);

// –ü–æ–∏—Å–∫ —Å RQL
$query = RqlParser::rqlDecode('eq(name,John)');
$results = $dataStore->query($query);
```

### HTTP API
```php
use rollun\datastore\Middleware\DataStoreApi;

// –°–æ–∑–¥–∞–Ω–∏–µ API
$api = new DataStoreApi($determinator);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
$response = $api->process($request, $handler);
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.0+
- PDO extension
- JSON extension
- Laminas –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

## –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary License

## –ê–≤—Ç–æ—Ä—ã

- avz-cmf (email@example.com)
- victorynox (it.proffesor02@gmail.com)

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `rollun-datastore` –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –¥–∞–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É.
